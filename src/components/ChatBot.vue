<template>
  <div class="d-flex justify-content-center container mt-5">
    <div class="wrapper">
      <div class="main scroll-wrapper">
        <div class="px-2 scroll">
          <div class="d-flex align-items-center">
            <div class="text-left pr-1"></div>
            <div class="pr-2 pl-1">
              <div v-for="message in chatMessages" :key="message.id">
                <div v-if="message.type === 'bot'">
                  <div class="d-flex align-items-center text-left">
                    <div class="pr-1">
                      <img
                        src="../../public/cat.jpeg"
                        width="30"
                        class="img1"
                      />
                    </div>
                    <div>
                      <span class="name">Bot</span>
                      <p class="msg">
                        {{ message.text }}
                      </p>
                    </div>
                  </div>
                </div>
                <div v-else>
                  <div
                    class="d-flex align-items-center text-right justify-content-end"
                  >
                    <div class="pr-2">
                      <span class="name">User</span>
                      <p class="msg">{{ message.text }}</p>
                    </div>
                    <div>
                      <img
                        src="../../public/panda.jpeg"
                        width="30"
                        class="img1"
                      />
                    </div>
                  </div>
                </div>
              </div>
              <div v-if="showOptions" class="flex-container">
                <p>–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç:</p>
                <button
                  @click="handleUserResponse('–ó–∞–∫–∞–∑–∞—Ç—å –ø–∏—Ü—Ü—É üçï')"
                  class="option"
                >
                  –ó–∞–∫–∞–∑–∞—Ç—å –ø–∏—Ü—Ü—É üçï
                </button>
                <button
                  @click="handleUserResponse('–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—É–¥–∏–ª—å–Ω–∏–∫ ‚è∞')"
                  class="option"
                >
                  –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—É–¥–∏–ª—å–Ω–∏–∫ ‚è∞
                </button>
                <button
                  @click="handleUserResponse('–í—ã–≤–µ—Å—Ç–∏ –ø–æ–≥–æ–¥—É ‚õÖ')"
                  class="option"
                >
                  –í—ã–≤–µ—Å—Ç–∏ –ø–æ–≥–æ–¥—É ‚õÖ
                </button>
              </div>

              <input
                type="text"
                name="text"
                class="form-control"
                placeholder="–ù–∞–ø–∏—à–∏—Ç–µ..."
                v-model="userMessage"
                @keyup.enter="handleUserResponse(userMessage)"
              />
              <div
                class="icondiv d-flex justify-content-end align-content-center text-center ml-2"
              >
                <i class="fa fa-paperclip icon1"></i>
                <i class="fa fa-arrow-circle-right icon2"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  data() {
    return {
      chatMessages: [
        { id: 1, text: "–ü—Ä–∏–≤–µ—Ç! –ß—Ç–æ —è –º–æ–≥—É –¥–ª—è –í–∞—Å —Å–¥–µ–ª–∞—Ç—å?", type: "bot" },
      ],
      userMessage: "",
      showOptions: true,
    };
  },
  methods: {
    handleUserResponse(response) {
      this.chatMessages.push({
        id: this.chatMessages.length + 1,
        text: response,
        type: "user",
      });
      this.showOptions = false;
      this.handleBotResponse(response);
    },
    getUserInput(event) {
      if (event.key === "Enter") {
        const userInput = event.target.value;
        this.handleUserResponse(userInput);
        event.target.value = "";
      }
    },
    handleBotResponse(userInput) {
      let botReply = "";
      if (userInput === "–ó–∞–∫–∞–∑–∞—Ç—å –ø–∏—Ü—Ü—É üçï") {
        botReply = "–•–æ—Ä–æ—à–æ, —è –∑–∞–∫–∞–∂—É –ø–∏—Ü—Ü—É. –ß—Ç–æ –µ—â–µ –º–æ–≥—É —Å–¥–µ–ª–∞—Ç—å?";
      } else if (userInput === "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—É–¥–∏–ª—å–Ω–∏–∫ ‚è∞") {
        botReply = "–ë—É–¥–∏–ª—å–Ω–∏–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –ß–µ–º –µ—â–µ –º–æ–≥—É –ø–æ–º–æ—á—å?";
      } else if (userInput === "–í—ã–≤–µ—Å—Ç–∏ –ø–æ–≥–æ–¥—É ‚õÖ") {
        botReply = "–ü–æ–≥–æ–¥–∞ —Å–µ–≥–æ–¥–Ω—è –æ—Ç–ª–∏—á–Ω–∞—è! –ß—Ç–æ –¥–∞–ª—å—à–µ?";
      } else {
        botReply = "–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ –ø–æ–Ω–∏–º–∞—é. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π –≤–∞—Ä–∏–∞–Ω—Ç.";
        this.showOptions = true;
      }

      this.chatMessages.push({
        id: this.chatMessages.length + 1,
        text: botReply,
        type: "bot",
      });

      if (
        botReply !==
        "–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ –ø–æ–Ω–∏–º–∞—é. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π –≤–∞—Ä–∏–∞–Ω—Ç."
      ) {
        this.showOptions = true;
      }
    },
  },
};
</script>
